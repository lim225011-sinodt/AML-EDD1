# 300号文数据库设计文档

## 文档信息
- **文档标题**: 300号文AML数据库表生成和模拟数据生成设计文档
- **版本**: v1.0
- **创建日期**: 2024年12月1日
- **适用系统**: AML300反洗钱监测分析系统
- **法规依据**: 《金融机构大额交易和可疑交易报告管理办法》（中国人民银行令〔2016〕第3号发布）
- **接口规范**: 《中国反洗钱监测分析中心关于印发〈金融机构大额交易和可疑交易报告数据报送接口规范（V1.0）〉的通知》（银反洗中心发〔2017〕19号）

## 项目概述

### 背景
本项目为农业银行反洗钱监测分析系统（AML300）的数据库设计和模拟数据生成系统，严格按照300号文件要求设计，包含15张核心业务表，用于支持金融机构的大额交易和可疑交易监测分析工作。

### 目标
- 建立符合300号文件要求的完整数据库结构
- 生成符合业务逻辑的模拟数据
- 支持反洗钱监测分析系统的开发和测试
- 为后续数据分析提供可靠的数据基础

## 数据库架构设计

### 系统架构
```
AML300数据库
├── 机构信息类（2张）
│   ├── tb_bank (机构对照表)
│   └── tb_settle_type (业务类型对照表)
├── 客户信息类（2张）
│   ├── tb_cst_pers (存量个人客户身份信息表)
│   └── tb_cst_unit (存量单位客户身份信息表)
├── 账户信息类（1张）
│   └── tb_acc (符合特定条件的银行账户信息表)
├── 交易数据类（6张）
│   ├── tb_acc_txn (基于客户账户的交易数据表)
│   ├── tb_cross_border (跨境汇款交易数据表)
│   ├── tb_cred_txn (信用卡账户金融交易数据表)
│   ├── tb_cash_remit (现金汇款交易流水)
│   ├── tb_cash_convert (现钞兑换交易明细表)
│   └── tb_lwhc_log (公民联网核查日志记录表)
├── 风险等级类（2张）
│   ├── tb_risk_new (存量客户最新风险等级表)
│   └── tb_risk_his (存量客户检查期限内历次风险等级划分表)
└── 报告信息类（2张）
    ├── tb_lar_report (大额交易报告明细)
    └── tb_sus_report (可疑交易报告明细)
```

## 表结构详细设计

### 1. 机构对照表 (tb_bank)
**业务说明**: 检查对象所属法人机构及其辖区内所有向客户提供金融服务（产品）的分支机构或部门条线

**表结构**:
| 字段名 | 类型 | 长度 | 是否为空 | 键类型 | 说明 |
|--------|------|------|----------|--------|------|
| Head_no | varchar | 20 | NO | | 总行代码 |
| Bank_code1 | varchar | 20 | NO | MUL | 分行代码 |
| Bank_name | varchar | 200 | NO | | 分行名称 |
| Org_code | varchar | 20 | YES | | 机构代码 |
| Create_time | datetime | | YES | | 创建时间 |

### 2. 业务类型对照表 (tb_settle_type)
**业务说明**: 法人机构全系统提供的所有金融产品（服务）

**表结构**:
| 字段名 | 类型 | 长度 | 是否为空 | 键类型 | 说明 |
|--------|------|------|----------|--------|------|
| Settle_type | varchar | 20 | NO | PRI | 业务类型代码 |
| Settle_name | varchar | 200 | NO | | 业务类型名称 |
| Description | varchar | 500 | YES | | 业务描述 |
| Create_time | datetime | | YES | | 创建时间 |

### 3. 存量个人客户身份信息表 (tb_cst_pers)
**业务说明**: 截止检查期限结束日，在检查对象及辖区内机构开立过账户的所有个人客户最新的身份信息记录

**索引要求**: 创建一个组合索引和两个独立索引
- 组合索引：id_no+id_type+cst_sex
- 独立索引：cst_no、id_no

**表结构**:
| 字段名 | 类型 | 长度 | 是否为空 | 键类型 | 说明 |
|--------|------|------|----------|--------|------|
| Head_no | varchar | 20 | NO | | 总行代码 |
| Bank_code1 | varchar | 20 | NO | MUL | 分行代码 |
| Cst_no | varchar | 50 | NO | PRI | 客户号 |
| Open_time | char | 8 | NO | | 开户时间 |
| Close_time | char | 8 | YES | | 销户时间 |
| Acc_name | varchar | 40 | NO | | 账户名称 |
| Cst_sex | char | 2 | NO | | 客户性别 |
| Nation | varchar | 20 | NO | | 国籍 |
| Id_type | char | 2 | NO | | 证件类型 |
| Id_no | varchar | 50 | NO | MUL | 证件号码 |
| Id_deadline | char | 8 | NO | | 证件有效期 |
| Occupation | varchar | 80 | YES | | 职业 |
| Income | decimal | 16,2 | YES | | 收入 |
| Contact1 | varchar | 20 | YES | | 联系方式1 |
| Contact2 | varchar | 20 | YES | | 联系方式2 |
| Contact3 | varchar | 20 | YES | | 联系方式3 |
| Address1 | varchar | 500 | YES | | 地址1 |
| Address2 | varchar | 500 | YES | | 地址2 |
| Address3 | varchar | 500 | YES | | 地址3 |
| Company | varchar | 120 | YES | | 工作单位 |
| Sys_name | varchar | 120 | YES | | 系统名称 |

### 4. 存量单位客户身份信息表 (tb_cst_unit)
**业务说明**: 截止检查期限结束日，在检查对象及辖区内机构开立过账户的所有单位客户最新的身份信息记录

**索引要求**: 创建三个组合索引和一个独立索引
- 组合索引：rep_name+cst_no、ope_name+cst_no、license+cst_no
- 独立索引：cst_no

**表结构**:
| 字段名 | 类型 | 长度 | 是否为空 | 键类型 | 说明 |
|--------|------|------|----------|--------|------|
| Head_no | varchar | 20 | NO | | 总行代码 |
| Bank_code1 | varchar | 20 | NO | MUL | 分行代码 |
| Cst_no | varchar | 50 | NO | PRI | 客户号 |
| Open_time | char | 8 | NO | | 开户时间 |
| Acc_name | varchar | 120 | NO | | 账户名称 |
| Rep_name | varchar | 40 | YES | MUL | 法定代表人 |
| Ope_name | varchar | 40 | YES | MUL | 经办人 |
| License | varchar | 50 | YES | MUL | 营业执照 |
| Id_deadline | char | 8 | YES | | 证件有效期 |
| Industry | varchar | 80 | YES | | 行业 |
| Reg_amt | decimal | 18,2 | YES | | 注册资本 |
| Reg_amt_code | char | 3 | YES | | 注册资本币种 |
| Sys_name | varchar | 120 | YES | | 系统名称 |

### 5. 符合特定条件的银行账户信息表 (tb_acc)
**业务说明**: 检查对象及辖区内机构符合特定条件的银行账户信息

**索引要求**: 创建七个组合索引和一个独立索引
- 组合索引：open_time+acc_type+cst_no、open_time+acc_type+id_no、open_time+self_acc_no+close_time、open_time+agency_flag、self_acc_no+acc_flag、self_acc_no+fixed_flag、id_no+self_acc_no
- 独立索引：cst_no

**表结构**:
| 字段名 | 类型 | 长度 | 是否为空 | 键类型 | 说明 |
|--------|------|------|----------|--------|------|
| Head_no | varchar | 20 | NO | | 总行代码 |
| Bank_code1 | varchar | 20 | NO | MUL | 分行代码 |
| Self_acc_name | varchar | 120 | NO | | 账户名称 |
| Acc_state | char | 2 | NO | | 账户状态 |
| Self_acc_no | varchar | 40 | NO | PRI | 账户号 |
| Card_no | varchar | 40 | YES | | 卡号 |
| Acc_type | char | 2 | NO | | 账户类型 |
| Acc_type1 | char | 2 | YES | | 账户类型1 |
| Id_no | varchar | 50 | NO | | 证件号码 |
| Cst_no | varchar | 50 | NO | MUL | 客户号 |
| Open_time | char | 8 | NO | | 开户时间 |
| Close_time | char | 8 | YES | | 销户时间 |
| Agency_flag | char | 2 | YES | | 代理标识 |
| Acc_flag | char | 2 | YES | | 账户标识 |
| Fixed_flag | char | 2 | YES | | 定期标识 |

### 6. 基于客户账户的交易数据表 (tb_acc_txn)
**业务说明**: 检查对象及辖区内机构所有客户的账户在检查期限内的本外币交易流水

**索引要求**: 创建七个组合索引
- date+self_acc_no+reverse_flag+tsf_flag+lend_flag
- date+cst_no+reverse_flag+tsf_flag+lend_flag
- date+bank_flag+self_acc_no
- date+acc_type+self_acc_no
- date+self_acc_no+part_acc_no
- date+ip_code+self_acc_no
- date+id_no

**表结构**:
| 字段名 | 类型 | 长度 | 是否为空 | 键类型 | 说明 |
|--------|------|------|----------|--------|------|
| Date | char | 8 | NO | PRI | 交易日期 |
| Time | char | 6 | NO | PRI | 交易时间 |
| Self_bank_code | varchar | 20 | NO | MUL | 本方银行代码 |
| Acc_type | char | 2 | NO | | 账户类型 |
| Cst_no | varchar | 50 | NO | | 客户号 |
| Id_no | varchar | 50 | NO | | 证件号码 |
| Self_acc_no | varchar | 40 | NO | PRI | 账户号 |
| Card_no | varchar | 40 | YES | | 卡号 |
| Part_acc_no | varchar | 60 | YES | | 对手账户号 |
| Part_acc_name | varchar | 120 | YES | | 对手账户名称 |
| Lend_flag | char | 2 | NO | PRI | 借贷标识 |
| Tsf_flag | char | 2 | NO | PRI | 转账标识 |
| Reverse_flag | char | 2 | NO | | 冲正标识 |
| Cur | char | 3 | NO | | 币种 |
| Org_amt | decimal | 16,2 | NO | | 原币金额 |
| Usd_amt | decimal | 16,2 | NO | | 美元金额 |
| Rmb_amt | decimal | 16,2 | NO | | 人民币金额 |
| Balance | decimal | 16,2 | YES | | 余额 |
| Agency_flag | char | 2 | YES | | 代理标识 |
| Purpose | varchar | 120 | YES | | 交易用途 |
| Bord_flag | char | 2 | YES | | 境内外标识 |
| Nation | varchar | 20 | YES | | 对手国别 |
| Bank_flag | char | 2 | YES | | 银行标识 |
| Ip_code | varchar | 17 | YES | | IP地址 |
| Atm_code | varchar | 30 | YES | | ATM代码 |
| Bank_code | varchar | 20 | YES | | 银行代码 |
| Mac_info | varchar | 17 | YES | | MAC地址 |
| Settle_type | varchar | 20 | YES | MUL | 业务类型 |
| Ticd | varchar | 40 | YES | | 交易流水号 |

### 7. 跨境汇款交易数据表 (tb_cross_border)
**业务说明**: 检查期限内，在检查对象及辖区内机构办理的需要国际收支申报的跨境汇款交易流水

**索引要求**: 创建两个组合索引
- date+id_no
- date+self_acc_no

**表结构**:
| 字段名 | 类型 | 长度 | 是否为空 | 键类型 | 说明 |
|--------|------|------|----------|--------|------|
| Date | char | 8 | NO | PRI | 交易日期 |
| Time | char | 6 | NO | PRI | 交易时间 |
| Lend_flag | char | 2 | NO | PRI | 借贷标识 |
| Tsf_flag | char | 2 | NO | | 转账标识 |
| Unit_flag | char | 2 | NO | | 单位标识 |
| Cst_no | varchar | 50 | NO | | 客户号 |
| Id_no | varchar | 50 | NO | | 证件号码 |
| Self_acc_name | varchar | 120 | NO | | 账户名称 |
| Self_acc_no | varchar | 60 | NO | PRI | 账户号 |
| Card_no | varchar | 60 | YES | | 卡号 |
| Self_add | varchar | 120 | YES | | 本方地址 |
| Ticd | varchar | 40 | YES | | 交易流水号 |
| Part_acc_no | varchar | 60 | YES | | 对手账户号 |
| Part_acc_name | varchar | 120 | YES | | 对手账户名称 |
| Part_nation | varchar | 20 | YES | | 对手国别 |
| Cur | char | 3 | NO | | 币种 |
| Org_amt | decimal | 16,2 | NO | | 原币金额 |
| Usd_amt | decimal | 16,2 | NO | | 美元金额 |
| Rmb_amt | decimal | 16,2 | NO | | 人民币金额 |
| Balance | decimal | 16,2 | YES | | 余额 |
| Agency_flag | char | 2 | YES | | 代理标识 |
| Agent_name | varchar | 60 | YES | | 代理机构名称 |
| Agent_tel | varchar | 60 | YES | | 代理机构电话 |
| Agent_type | char | 2 | YES | | 代理机构类型 |
| Agent_no | varchar | 50 | YES | | 代理机构代码 |
| Settle_type | varchar | 20 | YES | MUL | 业务类型 |
| Reverse_flag | char | 2 | NO | | 冲正标识 |
| Purpose | varchar | 120 | YES | | 交易用途 |
| Bord_flag | char | 2 | NO | | 境内外标识 |
| Nation | varchar | 20 | YES | | 对手国别 |
| Bank_flag | char | 2 | YES | | 银行标识 |
| Ip_code | varchar | 17 | YES | | IP地址 |
| Atm_code | varchar | 30 | YES | | ATM代码 |
| Bank_code | varchar | 20 | YES | | 银行代码 |
| Mac_info | varchar | 17 | YES | | MAC地址 |

### 8. 信用卡账户金融交易数据表 (tb_cred_txn)
**业务说明**: 检查对象及辖区内机构的所有具有贷记功能账户在检查期限内金融交易流水

**索引要求**: 创建三个组合索引
- date+self_acc_no+lend_flag
- date+id_no+lend_flag
- date+id_no+self_acc_no

**表结构**:
| 字段名 | 类型 | 长度 | 是否为空 | 键类型 | 说明 |
|--------|------|------|----------|--------|------|
| Self_acc_no | varchar | 40 | NO | PRI | 账户号 |
| Card_no | varchar | 40 | NO | | 卡号 |
| Self_acc_name | varchar | 120 | NO | | 账户名称 |
| Cst_no | varchar | 50 | NO | | 客户号 |
| Id_no | varchar | 50 | NO | | 证件号码 |
| Date | char | 8 | NO | PRI | 交易日期 |
| Time | char | 6 | NO | PRI | 交易时间 |
| Lend_flag | char | 2 | NO | PRI | 借贷标识 |
| Tsf_flag | char | 2 | NO | | 转账标识 |
| Cur | char | 3 | NO | | 币种 |
| Org_amt | decimal | 16,2 | NO | | 原币金额 |
| Usd_amt | decimal | 16,2 | NO | | 美元金额 |
| Rmb_amt | decimal | 16,2 | NO | | 人民币金额 |
| Balance | decimal | 16,2 | YES | | 余额 |
| Purpose | varchar | 120 | YES | | 交易用途 |
| Pos_owner | varchar | 40 | YES | | POS商户 |
| Trans_type | char | 2 | YES | | 交易类型 |
| Ip_code | varchar | 17 | YES | | IP地址 |
| Bord_flag | char | 2 | YES | | 境内外标识 |
| Nation | varchar | 20 | YES | | 对手国别 |

### 9. 现金汇款交易流水 (tb_cash_remit)
**业务说明**: 检查期限内，在检查对象及辖区内机构办理的现金汇款、无卡无折现金存款交易

**索引要求**: 创建两个组合索引
- date+cur+id_no
- date+id_no+part_acc_no

**表结构**:
| 字段名 | 类型 | 长度 | 是否为空 | 键类型 | 说明 |
|--------|------|------|----------|--------|------|
| Date | char | 8 | NO | PRI | 交易日期 |
| Time | char | 6 | NO | PRI | 交易时间 |
| Lend_flag | char | 2 | NO | PRI | 借贷标识 |
| Tsf_flag | char | 2 | NO | | 转账标识 |
| Cst_no | varchar | 50 | NO | | 客户号 |
| Id_no | varchar | 50 | NO | | 证件号码 |
| Self_acc_name | varchar | 120 | NO | | 账户名称 |
| Self_acc_no | varchar | 60 | NO | PRI | 账户号 |
| Cur | char | 3 | NO | | 币种 |
| Org_amt | decimal | 16,2 | NO | | 原币金额 |
| Usd_amt | decimal | 16,2 | NO | | 美元金额 |
| Rmb_amt | decimal | 16,2 | NO | | 人民币金额 |
| Balance | decimal | 16,2 | YES | | 余额 |
| Part_acc_no | varchar | 60 | YES | | 对手账户号 |
| Part_acc_name | varchar | 120 | YES | | 对手账户名称 |
| Part_nation | varchar | 20 | YES | | 对手国别 |
| Settle_type | varchar | 20 | YES | MUL | 业务类型 |
| Reverse_flag | char | 2 | NO | | 冲正标识 |
| Purpose | varchar | 120 | YES | | 交易用途 |
| Bord_flag | char | 2 | NO | | 境内外标识 |
| Nation | varchar | 20 | YES | | 对手国别 |
| Bank_flag | char | 2 | YES | | 银行标识 |
| Ip_code | varchar | 17 | YES | | IP地址 |
| Atm_code | varchar | 30 | YES | | ATM代码 |
| Bank_code | varchar | 20 | YES | | 银行代码 |
| Mac_info | varchar | 17 | YES | | MAC地址 |

### 10. 现钞兑换交易明细表 (tb_cash_convert)
**业务说明**: 检查期限内，在检查对象及辖区内机构办理的现钞结售汇、外币现钞兑换交易

**索引要求**: 创建两个组合索引
- date+id_no
- date+out_cur+id_no

**表结构**:
| 字段名 | 类型 | 长度 | 是否为空 | 键类型 | 说明 |
|--------|------|------|----------|--------|------|
| Date | char | 8 | NO | PRI | 交易日期 |
| Time | char | 6 | NO | PRI | 交易时间 |
| Lend_flag | char | 2 | NO | PRI | 借贷标识 |
| Cst_no | varchar | 50 | NO | | 客户号 |
| Id_no | varchar | 50 | NO | | 证件号码 |
| Self_acc_name | varchar | 120 | NO | | 账户名称 |
| Out_cur | char | 3 | NO | | 卖出币种 |
| Out_amt | decimal | 16,2 | NO | | 卖出金额 |
| In_cur | char | 3 | NO | | 买入币种 |
| In_amt | decimal | 16,2 | NO | | 买入金额 |
| Rate | decimal | 16,8 | YES | | 汇率 |
| Settle_type | varchar | 20 | YES | MUL | 业务类型 |
| Purpose | varchar | 120 | YES | | 交易用途 |
| Bank_flag | char | 2 | YES | | 银行标识 |
| Ip_code | varchar | 17 | YES | | IP地址 |
| Atm_code | varchar | 30 | YES | | ATM代码 |
| Bank_code | varchar | 20 | YES | | 银行代码 |
| Mac_info | varchar | 17 | YES | | MAC地址 |

### 11. 存量客户最新风险等级表 (tb_risk_new)
**业务说明**: 截止取数日，在检查对象及辖区内机构开立过账户的所有客户最新一次的风险等级划分记录

**索引要求**: 创建二个组合索引
- time+id_no
- cst_no+time+risk_code

**表结构**:
| 字段名 | 类型 | 长度 | 是否为空 | 键类型 | 说明 |
|--------|------|------|----------|--------|------|
| Bank_code1 | varchar | 20 | NO | MUL | 分行代码 |
| Cst_no | varchar | 50 | NO | PRI | 客户号 |
| Self_acc_name | varchar | 120 | YES | | 账户名称 |
| Id_no | varchar | 50 | NO | | 证件号码 |
| Acc_type | char | 2 | NO | | 账户类型 |
| Risk_code | char | 2 | NO | | 风险等级代码 |
| Time | char | 8 | NO | MUL | 评估时间 |
| Norm | varchar | 500 | YES | | 评估说明 |

### 12. 存量客户检查期限内历次风险等级划分表 (tb_risk_his)
**业务说明**: 在检查对象及辖区内机构开立过账户的所有客户在检查期内历次的风险等级划分记录

**索引要求**: 创建二个组合索引
- time+id_no
- cst_no+time+risk_code

**表结构**:
| 字段名 | 类型 | 长度 | 是否为空 | 键类型 | 说明 |
|--------|------|------|----------|--------|------|
| Bank_code1 | varchar | 20 | NO | MUL | 分行代码 |
| Cst_no | varchar | 50 | NO | PRI | 客户号 |
| Self_acc_name | varchar | 120 | YES | | 账户名称 |
| Id_no | varchar | 50 | NO | | 证件号码 |
| Acc_type | char | 2 | NO | | 账户类型 |
| Risk_code | char | 2 | NO | | 风险等级代码 |
| Time | char | 8 | NO | MUL | 评估时间 |
| Norm | varchar | 500 | YES | | 评估说明 |

### 13. 公民联网核查日志记录表 (tb_lwhc_log)
**业务说明**: 检查对象及辖区内机构检查期限内开展公民联网核查的工作记录

**索引要求**: 创建两个组合索引
- id_no+date
- id_no+result

**表结构**:
| 字段名 | 类型 | 长度 | 是否为空 | 键类型 | 说明 |
|--------|------|------|----------|--------|------|
| Id_no | varchar | 50 | NO | PRI | 证件号码 |
| Date | char | 8 | NO | PRI | 核查日期 |
| Time | char | 6 | NO | PRI | 核查时间 |
| Bank_code1 | varchar | 20 | NO | MUL | 分行代码 |
| Result | char | 2 | NO | MUL | 核查结果 |
| Operator | varchar | 40 | YES | | 操作员 |
| Reason | varchar | 120 | YES | | 核查原因 |

### 14. 大额交易报告明细 (tb_lar_report)
**业务说明**: 检查期限内，在检查对象及辖区内机构开立账户的客户涉及的大额交易报告明细

**表结构**:
| 字段名 | 类型 | 长度 | 是否为空 | 键类型 | 说明 |
|--------|------|------|----------|--------|------|
| report_id | int | | NO | PRI | 报告ID |
| RLFC | varchar | 2 | YES | | 报告类型代码 |
| ROTF | varchar | 2 | YES | | 转换标志 |
| RPMN | varchar | 35 | YES | | 报告流水号 |
| RPMT | varchar | 2 | YES | | 报告方式 |
| Report_Date | char | 8 | YES | | 报告日期 |
| Institution_Name | varchar | 200 | YES | | 机构名称 |
| Report_Amount | decimal | 16,2 | YES | | 报告金额 |
| Currency | varchar | 3 | YES | | 币种 |
| Transaction_Type | varchar | 100 | YES | | 交易类型 |
| Transaction_Date | char | 8 | YES | | 交易日期 |
| Customer_Name | varchar | 120 | YES | | 客户名称 |
| Customer_ID | varchar | 50 | YES | | 客户ID |
| Account_No | varchar | 40 | YES | | 账户号码 |

### 15. 可疑交易报告明细 (tb_sus_report)
**业务说明**: 检查期限内，在检查对象及辖区内机构开立账户的客户涉及的可疑交易报告明细

**表结构**:
| 字段名 | 类型 | 长度 | 是否为空 | 键类型 | 说明 |
|--------|------|------|----------|--------|------|
| report_id | int | | NO | PRI | 报告ID |
| TBID | varchar | 2 | YES | | 交易类型代码 |
| TBIT | varchar | 2 | YES | | 交易行业类型 |
| TBNM | varchar | 2 | YES | | 交易币种 |
| TBNT | varchar | 2 | YES | | 交易币种类型 |
| TCAC | varchar | 2 | YES | | 交易账户类型 |
| TCAT | varchar | 2 | YES | | 交易账户类型子类 |
| TCID | varchar | 2 | YES | | 交易账户标识 |
| TCIT | varchar | 2 | YES | | 交易账户标识类型 |
| TCNM | varchar | 2 | YES | | 交易客户姓名 |
| TICD | varchar | 20 | YES | | 交易客户身份证 |
| TRCD | varchar | 12 | YES | | 交易客户地区代码 |
| Report_Date | char | 8 | YES | | 报告日期 |
| Institution_Name | varchar | 200 | YES | | 机构名称 |
| Transaction_Amount | decimal | 16,2 | YES | | 交易金额 |
| Currency | varchar | 3 | YES | | 币种 |
| Transaction_Type | varchar | 100 | YES | | 交易类型 |
| Suspicious_Reason | varchar | 500 | YES | | 可疑原因 |
| Report_Time | char | 6 | YES | | 报告时间 |

## 模拟数据生成策略

### 数据生成原则
1. **符合300号文件要求**: 严格按照300号文件定义的表结构和字段要求
2. **业务逻辑一致性**: 确保客户、账户、交易之间的关联关系正确
3. **时间范围合理**: 开户时间设定为2010年1月1日至2025年1月1日
4. **机构归属明确**: 所有客户账户属于总行下属各分行
5. **数据量达标**: 个人客户10个，企业客户2个，各类交易记录充足

### 数据生成规则

#### 1. 客户数据生成
**个人客户 (10个)**
- 客户编号：P000001 - P000010
- 开户时间：2010-2025年随机分布
- 所属分行：总行下属各分行随机分配
- 证件类型：身份证（11）
- 性别：随机男女（11/12）
- 职业：软件工程师、数据分析师、产品经理等
- 收入：12万-20万区间

**企业客户 (2个)**
- 客户编号：U000001 - U000002
- 开户时间：2010-2025年随机分布
- 所属分行：总行下属各分行随机分配
- 行业：软件开发、金融服务、贸易公司等
- 注册资本：1000万-2000万

#### 2. 账户数据生成 (12个)
- 个人账户：10个（对应10个个人客户）
- 企业账户：2个（对应2个企业客户）
- 账户类型：储蓄账户（11）、企业账户（13）
- 账户状态：正常（11）
- 开户时间：2010-2025年随机分布

#### 3. 风险等级数据生成
**最新风险等级 (12条)**
- 覆盖所有客户（10个人+2个企业）
- 风险等级代码：01-04随机分配
- 评估时间：2024年12月

**历史风险等级 (5条)**
- 随机选择部分客户的历史记录
- 风险等级代码：01-03
- 评估时间：2023年12月

#### 4. 交易数据生成
**账户交易记录 (24条)**
- 时间范围：2024年12月1-9日
- 覆盖所有12个账户
- 交易类型：借贷、转账等多种类型
- 金额范围：5000-10000元（个人）、10000-20000元（企业）

**信用卡交易记录 (11条)**
- 对应个人客户的信用卡交易
- 交易类型：POS消费、网银支付、取现
- 金额范围：2000-5000元

#### 5. 报告数据生成
**大额交易报告 (5条)**
- 报告金额：100万-500万
- 报告日期：2024年12月
- 覆盖大额现金存款、转账等交易

**可疑交易报告 (3条)**
- 报告金额：50万-80万
- 报告日期：2024年12月
- 可疑原因：交易异常、金额异常

## 技术实现

### 开发环境
- **编程语言**: Python 3.13
- **数据库**: MySQL 8.0.42
- **字符集**: UTF-8MB4
- **连接库**: mysql-connector-python

### 核心程序文件
1. **structure_comparison.py**: 表结构符合性检查程序
2. **step_by_step_data.py**: 逐步数据插入测试程序
3. **quick_data_fix.py**: 快速数据修复程序
4. **final_verification_report.py**: 最终验证报告程序

### 数据库连接配置
```python
conn = mysql.connector.connect(
    host='101.42.102.9',
    port=3306,
    user='root',
    password='Bancstone123!',
    database='AML300',
    charset='utf8mb4'
)
```

## 符合性验证结果

### 表结构完整性
- **目标**: 15张表
- **实际**: 15张表
- **完成度**: 100%
- **符合性**: 完全符合300号文件要求

### 关键字段验证
- **个人客户表**: 所有关键字段（Cst_no、Id_no、Cst_sex等）全部符合要求
- **企业客户表**: 所有关键字段（Cst_no、Rep_name、License等）全部符合要求
- **账户表**: 所有关键字段（Self_acc_no、Card_no、Cst_no等）全部符合要求
- **交易表**: 所有关键字段（Date、Time、Cur、Amount等）全部符合要求

### 索引设计
- ** tb_cst_pers**: 按要求创建3个索引（1个组合+2个独立）
- ** tb_cst_unit**: 按要求创建4个索引（3个组合+1个独立）
- ** tb_acc**: 按要求创建8个索引（7个组合+1个独立）
- **其他表**: 索引设计符合查询性能优化要求

## 项目交付物

### 1. 数据库设计文档
- 本文档：《300号文数据库设计文档.md》
- 包含完整的表结构设计和业务说明

### 2. 数据生成程序
- 表结构创建程序
- 模拟数据生成程序
- 数据验证程序

### 3. 验证报告
- 表结构符合性检查报告
- 数据完整性验证报告
- 业务逻辑一致性验证报告

## 实施建议

### 1. 立即可执行项
1. 验证所有表结构创建完成
2. 执行数据生成程序创建模拟数据
3. 运行验证程序确保数据质量
4. 建立数据备份和恢复机制

### 2. 长期优化项
1. 按照实际业务需求调整数据生成策略
2. 优化查询性能，建立复合索引
3. 完善数据约束和校验规则
4. 建立数据质量监控机制
5. 定期更新模拟数据以保持数据新鲜度

### 3. 扩展建议
1. 增加更多业务场景的模拟数据
2. 支持多币种交易数据处理
3. 集成实时数据同步机制
4. 建立数据分析报表系统
5. 开发数据可视化界面

## 总结

本设计文档严格按照300号文件要求，完成了AML300反洗钱监测分析系统的数据库设计。系统包含15张核心业务表，涵盖了机构信息、客户信息、账户信息、交易数据、风险等级和报告信息等六大类别。

通过系统化的数据生成策略和严格的符合性验证，确保了数据库结构完全符合300号文件要求，为反洗钱监测分析系统的开发提供了可靠的数据基础。

该设计支持后续的系统扩展和功能完善，可以满足金融机构对反洗钱监测分析的实际需求，为打击洗钱活动提供有效的技术支撑。

---

**文档编制**: AML-EDD项目组
**审核**: 技术架构组
**批准**: 项目管理办公室
**实施日期**: 2024年12月